doctype html
html
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge")
    meta(name="viewport", content="width=device-width, minimum-scale=1.0, maximum-scale=1.0")
    meta(name="description", content=config.description)
    meta(name="keywords", content=config.keywords)
    meta(name="author", content=config.author)

    title #{title} | Web Design Guide

    link(rel="stylesheet", href=relative("/css/docs.css"))

    script(type='text/javascript', src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js')
    script(type='text/javascript', src='//cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js')
    script(type='text/javascript', src='//cdnjs.cloudflare.com/ajax/libs/URI.js/1.11.2/URI.min.js')
    script(type='text/javascript', src='//cdnjs.cloudflare.com/ajax/libs/localforage/1.1.1/localforage.min.js')

    script(type='text/javascript').
      // Include the UserVoice JavaScript SDK (only needed once on a page)
      UserVoice=window.UserVoice||[];
      UserVoice.push(['set', {
        accent_color: '#0062a9',
        screenshot_enabled: false
      }]);
      (function(){
        var uv=document.createElement('script');
        uv.type='text/javascript';
        uv.async=true;
        uv.src='//widget.uservoice.com/O8ex403PfbC0GjKz3DuQ.js';
        var s=document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(uv,s)
      })();

    script(src=relative("/js/style.all.js"))
    script(src=relative("/js/api.js"))
    script(src=relative("/js/github-integration.js"))
    script(src=relative("/js/main.js"))
    script(src=relative("/js/octocat.js"))

  body.site(data-mask='true')
    .site__page
      header.header.header--main
        .l-container
          .header__mobile-trigger(data-toggle='site-menu', data-target='.site')
          a.header__brand.brand(href=relative("/index.html"))
            .brand__logo
          .header__meta
            .header__meta__upper
              .header__meta__menu
                - var segments = []
                - segments.push({ name: 'Design Guidelines', slug: 'design', path: '/design' })
                - segments.push({ name: 'Developer Toolkit', slug: 'development', path: '/development' })
                - segments.push({ name: 'Examples', slug: 'examples', path: '/examples' })

                ul.menu.menu--meta
                  each s in segments
                    li.menu__item(
                      class={'is-active': segment == s.slug}
                    )
                      a.menu__link(
                        href=relative(s.path)
                        class={'is-active': segment == s.slug}
                      )= s.name
            .header__meta__lower
              .header__meta__social
                .menu.menu--social
                  .menu__item
                    a(href='#', data-uv-trigger).menu__link.icon.icon--feedback

              // ko if: hasGitHubIntegration
              .header__meta__social
                .menu.menu--social
                  // ko if: !github.isSignedIn()
                  .menu__item(data-bind='css: {\'menu__item--docs-signin\': !github.isAuthenticating()}')
                    img(src='https://www.scopevisio.com/sites/all/themes/scopevisio/images/loading.gif', data-bind='visible: github.isAuthenticating()').menu__link
                    a(href='#', data-bind="visible: !github.isAuthenticating(), attr: { href: github.getAuthUrl() }").menu__link Sign in with GitHub
                  // /ko
                  // ko if: github.isSignedIn()
                  .menu__item
                    img(src='https://www.scopevisio.com/sites/all/themes/scopevisio/images/loading.gif', data-bind='visible: github.isAuthenticating()').menu__link
                    a(href=config.repository.url, data-bind='visible: !github.isAuthenticating() && github.isActiveMember()').menu__link.icon.icon--github
                  // /ko
              // /ko
              .header__meta__welcome
                ul
                  li.header__meta__welcome__item
                    if segment == 'design'
                      span Design Guidelines
                    else if segment == 'development'
                      span Developer Toolkit
                    else if segment == 'examples'
                      span Examples
                    else
                      span Web Design Guide

      .hr

      .l-container!= contents

      .hr

      footer.footer
        .footer__copyline
          .footer__copyline__inner
            .l-container
              ul.copyline-menu
                li.copyline-menu__item
                  span.copyline-menu__text= config.copyright

    .site__mobile-menu

      nav#menu-mobile.menu.menu--sliding
        ul.menu__level
          li.menu__item
            a.menu__link(
              href=relative('/index.html')
              data-link='/index.html'
            ) Overview

          li.menu__item
            a.menu__link.menu__link--parent(
              href='#'
            ) Design Guidelines

            ul.menu__level
              li.menu__item.menu__item--back
                a.menu__link.menu__link--back(
                  href='#'
                ) Design Guidelines

              each page in design
                li.menu__item
                  a.menu__link(
                    href=relative(page.link)
                    data-link=page.link
                  )= page.title

              - var sections = []
              - sections.push({ name: 'Fundamentals', items: design_fundamentals })
              - sections.push({ name: 'Components', items: design_components })

              each section in sections
                li.menu__item
                  a.menu__link.menu__link--parent(
                    href='#'
                  )= section.name

                  ul.menu__level
                    li.menu__item.menu__item--back
                      a.menu__link.menu__link--back(
                        href='#'
                      )= section.name

                    each page in section.items
                      li.menu__item
                        a.menu__link(
                          href=relative(page.link)
                          data-link=page.link
                        )= page.title

          li.menu__item
            a.menu__link.menu__link--parent(
              href='#'
            ) Developer Toolkit

            ul.menu__level
              li.menu__item.menu__item--back
                a.menu__link.menu__link--back(
                  href='#'
                ) Developer Toolkit

              each page in development
                li.menu__item
                  a.menu__link(
                    href=relative(page.link)
                    data-link=page.link
                  )= page.title

              - var sections = []
              - sections.push({ name: 'Blocks', items: development_blocks })
              - sections.push({ name: 'Mixins', items: development_mixins })
              - sections.push({ name: 'jQuery Plugins', items: development_plugins })

              each section in sections
                li.menu__item
                  a.menu__link.menu__link--parent(
                    href='#'
                  )= section.name

                  ul.menu__level
                    li.menu__item.menu__item--back
                      a.menu__link.menu__link--back(
                        href='#'
                      )= section.name

                    each page in section.items
                      li.menu__item
                        a.menu__link(
                          href=relative(page.link)
                          data-link=page.link
                        )= page.title

          li.menu__item
            a.menu__link(
              href=relative('/examples')
              data-link='/examples/index.html'
            ) Examples

    script(type='text/javascript').
      // Set the right mobile menu level as current
      var $menu = $("#menu-mobile");
      var $level = $menu.find("[data-link='!{link}']").closest('.menu__level');

      $menu.slidingMenu();
      $menu.slidingMenu('level', $level);

      // Highlight the right mobile menu link as active
      $menu.find("[data-link='!{link}']").addClass('is-active')

      // Setup the fancy GitHub integration
      var viewModel = new MainViewModel(!{JSON.stringify(config)});
      ko.applyBindings(viewModel);
      viewModel.init();
